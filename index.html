<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mountaineer Runner - Dino Clone Full Features</title>
<style>
  html, body {
    margin:0; padding:0; overflow:hidden; height:100%; background:#f7f7f7;
    font-family: Arial, sans-serif;
  }
  #gameCanvas {
    background: linear-gradient(to top, #87ceeb 0%, #d0f0c0 100%);
    display: block;
    margin: 0 auto;
    border-bottom: 5px solid #555;
  }
  #score {
    position: fixed;
    top: 10px; right: 20px;
    font-weight: bold; font-size: 20px;
    color: #333;
    user-select:none;
  }
  #highScore {
    position: fixed;
    top: 40px; right: 20px;
    font-weight: normal; font-size: 14px;
    color: #666;
    user-select:none;
  }
  #instructions {
    position: fixed;
    bottom: 20px; left: 50%; transform: translateX(-50%);
    font-size: 14px; color: #666;
    user-select:none;
  }
  #gameOverScreen {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.85);
    color: #fff; font-size: 28px;
    padding: 40px 60px;
    border-radius: 12px;
    display: none;
    text-align: center;
    user-select:none;
  }
  #gameOverScreen button {
    margin-top: 20px;
    padding: 10px 30px;
    font-size: 20px;
    border: none;
    border-radius: 8px;
    background: #28a745;
    color: white;
    cursor: pointer;
  }
  #gameOverScreen button:active {
    background: #1e7e34;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="200" aria-label="Mountaineer runner game"></canvas>
<div id="score" aria-live="polite" aria-atomic="true">Score: 0</div>
<div id="highScore" aria-live="polite" aria-atomic="true">High Score: 0</div>
<div id="instructions">Press SPACE or TAP to jump</div>
<div id="gameOverScreen" role="alertdialog" aria-modal="true" aria-labelledby="gameOverTitle">
  <div id="gameOverTitle">Game Over!</div>
  <div id="finalScore"></div>
  <button id="restartBtn">Restart</button>
</div>
<script>
(() => {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const scoreDiv = document.getElementById('score');
  const highScoreDiv = document.getElementById('highScore');
  const gameOverScreen = document.getElementById('gameOverScreen');
  const finalScoreText = document.getElementById('finalScore');
  const restartBtn = document.getElementById('restartBtn');

  const WIDTH = canvas.width;
  const HEIGHT = canvas.height;

  // Player setup
  const player = {
    x: 50,
    y: HEIGHT - 70,
    width: 40,
    height: 60,
    yVelocity: 0,
    gravity: 0.6,
    jumpForce: -12,
    grounded: true,
    color: '#d65151'
  };

  // Ground level offset from bottom
  const groundY = HEIGHT - 10;

  let obstacles = [];
  let obstacleSpeed = 6;
  let spawnTimer = 0;
  let spawnInterval = 90;
  let score = 0;
  let highScore = localStorage.getItem('mountaineerHighScore') || 0;
  let running = true;

  // Animate running legs (simple up-down effect)
  let legToggle = 0;

  // Draw player with simple animation
  function drawPlayer() {
    ctx.fillStyle = player.color;
    // body
    ctx.fillRect(player.x, player.y, player.width, player.height);
    // head
    ctx.beginPath();
    ctx.fillStyle = '#f3c9b9';
    ctx.arc(player.x + player.width/2, player.y - 10, 12, 0, Math.PI * 2);
    ctx.fill();
    // backpack
    ctx.fillStyle = '#2e8b57';
    ctx.fillRect(player.x - 5, player.y + 10, 12, 25);

    // legs animation
    ctx.strokeStyle = '#662222';
    ctx.lineWidth = 5;
    ctx.lineCap = 'round';

    let legY = player.y + player.height;
    if (player.grounded) {
      // alternate legs up and down
      if(legToggle < 15) {
        // right leg forward
        ctx.beginPath();
        ctx.moveTo(player.x + player.width - 10, legY);
        ctx.lineTo(player.x + player.width - 10, legY + 15);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(player.x + 10, legY);
        ctx.lineTo(player.x + 10, legY + 25);
        ctx.stroke();
      } else {
        // left leg forward
        ctx.beginPath();
        ctx.moveTo(player.x + 10, legY);
        ctx.lineTo(player.x + 10, legY + 15);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(player.x + player.width - 10, legY);
        ctx.lineTo(player.x + player.width - 10, legY + 25);
        ctx.stroke();
      }
    } else {
      // jump pose legs straight down
      ctx.beginPath();
      ctx.moveTo(player.x + 10, legY);
      ctx.lineTo(player.x + 10, legY + 20);
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(player.x + player.width - 10, legY);
      ctx.lineTo(player.x + player.width - 10, legY + 20);
      ctx.stroke();
    }
  }

  function drawObstacle(obs) {
    if(obs.type === 'tree') {
      ctx.fillStyle = '#2e8b57';
      ctx.fillRect(obs.x, obs.y - 40, 20, 40);
      ctx.beginPath();
      ctx.moveTo(obs.x - 10, obs.y - 40);
      ctx.lineTo(obs.x + 30, obs.y - 40);
      ctx.lineTo(obs.x + 10, obs.y - 80);
      ctx.closePath();
      ctx.fill();
    } else if(obs.type === 'rock') {
      ctx.fillStyle = '#888';
      ctx.beginPath();
      ctx.ellipse(obs.x + 20, obs.y - 20, 20, 15, 0, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  function resetGame() {
    obstacles = [];
    score = 0;
    obstacleSpeed = 6;
    spawnTimer = 0;
    spawnInterval = 90;
    player.y = HEIGHT - player.height - 10;
    player.yVelocity = 0;
    player.grounded = true;
    running = true;
    legToggle = 0;
    gameOverScreen.style.display = 'none';
    loop();
  }

  function gameOver() {
    running = false;
    if(score > highScore) {
      highScore = score;
      localStorage.setItem('mountaineerHighScore', highScore);
    }
    finalScoreText.textContent = `Your Score: ${score}`;
    gameOverScreen.style.display = 'block';
  }

  function update() {
    if(!running) return;

    // Player physics
    player.yVelocity += player.gravity;
    player.y += player.yVelocity;

    if(player.y >= groundY - player.height) {
      player.y = groundY - player.height;
      player.yVelocity = 0;
      player.grounded = true;
    } else {
      player.grounded = false;
    }

    // Spawn obstacles
    spawnTimer++;
    if(spawnTimer >= spawnInterval) {
      spawnTimer = 0;
      let type = Math.random() < 0.5 ? 'tree' : 'rock';
      obstacles.push({
        x: WIDTH,
        y: groundY,
        type: type,
      });
      if(spawnInterval > 40) spawnInterval -= 0.4;
      obstacleSpeed += 0.03;
    }

    // Move obstacles
    for(let i = obstacles.length -1; i >= 0; i--) {
      obstacles[i].x -= obstacleSpeed;
      if(obstacles[i].x + 40 < 0) {
        obstacles.splice(i, 1);
        score